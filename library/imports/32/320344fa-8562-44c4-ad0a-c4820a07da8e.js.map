{"version":3,"sources":["../../../../../assets/Script/ViewScript/assets/Script/ViewScript/DiffSelectScript.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/Script/ViewScript","sourcesContent":["import WordModel from \"../Model/WordModel\";\r\nimport EventUtil from \"../Util/EventUtil\";\r\nimport GameEvent from \"../Const/GameEvent\";\r\nimport SwitchViewData from \"../Common/SwitchViewData\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class NewClass extends cc.Component {\r\n\r\n    @property(cc.ScrollView)\r\n    scrollView: cc.ScrollView = null;\r\n\r\n    private diffCell : Array<cc.Node> = new Array();\r\n    private touchBeginX = 0;\r\n    private touchBeginY = 0;\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n        this.scrollView.node.on(cc.Node.EventType.TOUCH_START,this.onTouchHandler,this);\r\n        this.scrollView.node.on(cc.Node.EventType.TOUCH_END,this.onTouchHandler,this);\r\n        this.initDiff();   \r\n    }\r\n\r\n    private initDiff(){\r\n        let diffLst = new Array();\r\n        for (let diff in WordModel.DDiffMap){\r\n            diffLst.push({index : diff, name : WordModel.DDiffMap[diff]});\r\n        }\r\n        diffLst.sort((diffA,diffB)=>{\r\n            return diffA.index > diffB.index ? 1 : -1;\r\n        });\r\n        cc.loader.loadRes(\"prefab/DiffCell\",(err,prefab)=>{\r\n            if (err){\r\n                console.log(\"加载perfab失败, err = \" + err);\r\n                return ;\r\n            }\r\n            let y = this.scrollView.content.height;\r\n            for (let data of diffLst){\r\n                let node = cc.instantiate(prefab);\r\n                this.scrollView.content.addChild(node);\r\n                node.x = this.scrollView.node.width / 2;\r\n                node.y = y - node.height / 2;\r\n                y = y - node.height;\r\n                let script = node.getComponent(\"DiffCellScript\");\r\n                script.setDiff(data);\r\n                this.diffCell.push(node);\r\n            }\r\n        });\r\n    }\r\n\r\n    private onTouchHandler(event : cc.Event.EventTouch){\r\n        if (event.type == cc.Node.EventType.TOUCH_START){\r\n            this.touchBeginX = event.getLocationX();\r\n            this.touchBeginY = event.getLocationY();\r\n        }else if (event.type == cc.Node.EventType.TOUCH_END){\r\n            let x = event.getLocationX();\r\n            let y = event.getLocationY();\r\n            if (Math.abs(x - this.touchBeginX) > 50 || Math.abs(y - this.touchBeginY) > 50){\r\n                return ;\r\n            }else{\r\n                let wp = new cc.Vec2(x,y);\r\n                for(let diffCell of this.diffCell){\r\n                    let np = diffCell.convertToNodeSpace(wp);\r\n                    if(np.x >= 0 && np.x <= diffCell.width && \r\n                        np.y >= 0 && np.y <= diffCell.height){\r\n                        let script = diffCell.getComponent(\"DiffCellScript\");\r\n                        let diff = script.getDiff().index;\r\n                        WordModel.getInstance().setDiff(diff);\r\n                        let switchViewDat = new SwitchViewData(\"GameView\");\r\n                        EventUtil.dispatchEvent(GameEvent.SWITCH_VIEW,switchViewDat);\r\n                        EventUtil.dispatchEvent(GameEvent.RESTART_GAME);\r\n                        return ;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}