{"version":3,"sources":["../../../../../assets/Script/ViewScript/assets/Script/ViewScript/TopInfoScript.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"../../../../../assets/Script/ViewScript","sourcesContent":["import EventUtil from \"../Util/EventUtil\";\r\nimport GameEvent from \"../Const/GameEvent\";\r\nimport WordModel from \"../Model/WordModel\";\r\nimport SwitchViewData from \"../Common/SwitchViewData\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class TopInfoScript extends cc.Component {\r\n\r\n    @property(cc.Label)\r\n    labTime: cc.Label = null;\r\n    @property(cc.Label)\r\n    labFound: cc.Label = null;\r\n\r\n    @property(cc.Button)\r\n    btnPause: cc.Button = null;\r\n\r\n    private time = 0;\r\n\r\n    // onLoad () {}\r\n\r\n    start () {\r\n        this.labTime.string = \"00:00\";\r\n        EventUtil.addEvent(GameEvent.WORD_COMPLETE,this.updateComplete,this);\r\n        EventUtil.addEvent(GameEvent.RESUME_GAME,this.resumeGame,this);\r\n    }\r\n\r\n    private btnPauseHandler(event : cc.Event.EventCustom){\r\n        this.node.pauseAllActions();\r\n        let switchViewData = new SwitchViewData(\"PauseView\");\r\n        EventUtil.dispatchEvent(GameEvent.SWITCH_VIEW,switchViewData);\r\n    }\r\n\r\n    private updateComplete(){\r\n        let allCount = WordModel.getInstance().getShowWordCount();\r\n        let completeCount = WordModel.getInstance().getCompleteCount();\r\n        this.labFound.string = `${completeCount} / ${allCount}`;\r\n        let totalCount = WordModel.getInstance().getWordLstCount();\r\n        console.log(totalCount);\r\n        if (completeCount >= totalCount){\r\n            let switchViewData = new SwitchViewData(\"GameEnd\");\r\n            EventUtil.dispatchEvent(GameEvent.SWITCH_VIEW,switchViewData);\r\n        }\r\n    }\r\n\r\n    public restart(){\r\n        this.node.stopAllActions();\r\n        this.updateComplete();\r\n        this.time = 0;\r\n        let act1 = cc.delayTime(1);\r\n        let act2 = cc.callFunc(()=>{\r\n            this.time++;\r\n            let min = Math.floor(this.time / 60);\r\n            let minStr = min >= 10 ? min : \"0\" + min;\r\n            let sec = this.time % 60;\r\n            let secStr = sec >= 10 ? sec : \"0\" + sec;\r\n            this.labTime.string = `${minStr}:${secStr}`;\r\n        });\r\n        this.node.runAction(cc.repeatForever(cc.sequence(act1,act2)));\r\n    }\r\n\r\n    private resumeGame(event : cc.Event.EventCustom){\r\n        this.node.resumeAllActions();\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}